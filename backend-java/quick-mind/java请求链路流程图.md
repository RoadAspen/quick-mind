# Java å®Œæ•´è¯·æ±‚é“¾è·¯æµç¨‹å›¾ï¼ˆåˆ†é¡µ + æŸ¥è¯¢ï¼‰

## ä¸€ã€å®Œæ•´è¯·æ±‚é“¾è·¯æµç¨‹å›¾ï¼ˆåˆ†é¡µ + æŸ¥è¯¢ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æµè§ˆå™¨    â”‚
â”‚ /user/list â”‚
â”‚ ?pageNum=1 â”‚
â”‚ &pageSize= â”‚
â”‚ &userName= â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚ HTTP Request
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Controller            â”‚
â”‚ UserController                 â”‚
â”‚                                â”‚
â”‚ 1. æ¥æ”¶å‚æ•°                    â”‚
â”‚    - pageNum @RequestParam     â”‚
â”‚    - pageSize @RequestParam    â”‚
â”‚    - SysUser query             â”‚
â”‚                                â”‚
â”‚ 2. ä¸å†™ä¸šåŠ¡é€»è¾‘                â”‚
â”‚ 3. è°ƒç”¨ Service æ¥å£           â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ Java æ–¹æ³•è°ƒç”¨
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Service             â”‚
â”‚ UserService (æ¥å£)             â”‚
â”‚                                â”‚
â”‚ 1. å®šä¹‰â€œèƒ½åšä»€ä¹ˆâ€              â”‚
â”‚    getUserList(...)             â”‚
â”‚ 2. ä¸å…³å¿ƒæ•°æ®åº“ç»†èŠ‚            â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ æ¥å£å¤šæ€
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ServiceImpl              â”‚
â”‚ UserServiceImpl                â”‚
â”‚                                â”‚
â”‚ 1. çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘              â”‚
â”‚ 2. è®¡ç®— offset                 â”‚
â”‚ 3. å¯åŠ äº‹åŠ¡ / ç¼“å­˜ / æ ¡éªŒ       â”‚
â”‚ 4. è°ƒç”¨ Mapper                 â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚ Java æ–¹æ³•è°ƒç”¨
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Mapper              â”‚
â”‚ UserMapper                     â”‚
â”‚                                â”‚
â”‚ 1. å‚æ•°ä¸ SQL ç»‘å®š              â”‚
â”‚ 2. ä¸å†™ä¸šåŠ¡é€»è¾‘                â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             SQL                â”‚
â”‚ SELECT * FROM sys_user         â”‚
â”‚ WHERE ...                      â”‚
â”‚ LIMIT offset, pageSize         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          è¿”å›ç»“æœ               â”‚
â”‚ List<SysUser>                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       AjaxResult å°è£…           â”‚
â”‚ {                              â”‚
â”‚   code: 200                    â”‚
â”‚   msg: "æˆåŠŸ"                  â”‚
â”‚   data: [...]                  â”‚
â”‚ }                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€æ¯ä¸€å±‚â€œåªå¹²ä¸€ä»¶äº‹â€ï¼ˆæ ¸å¿ƒåŸåˆ™ï¼‰

### 1ï¸âƒ£ Controllerï¼ˆæ¥ HTTPï¼‰

**èŒè´£**

* æ¥å‚æ•°
* è°ƒ Service
* è¿”å›ç»Ÿä¸€ç»“æœ

**ç»å¯¹ä¸åš**

* SQL
* if else ä¸šåŠ¡åˆ¤æ–­
* è®¡ç®— offset

```java

@GetMapping("/list")
public AjaxResult<List<SysUser>> list(
        @RequestParam(defaultValue = "1") int pageNum,
        @RequestParam(defaultValue = "10") int pageSize,
        SysUser query
) {
    return AjaxResult.success(
            userService.getUserList(pageNum, pageSize, query)
    );
}
```

---

### 2ï¸âƒ£ Serviceï¼ˆæ¥å£ = ä¸šåŠ¡èƒ½åŠ›å®šä¹‰ï¼‰

**èŒè´£**

* æè¿°ï¼šæˆ‘èƒ½å¹²ä»€ä¹ˆ

```java
public interface UserService {
    List<SysUser> getUserList(int pageNum, int pageSize, SysUser query);
}
```

> ğŸ‘‰ Controller **åªä¾èµ–æ¥å£**
> ğŸ‘‰ è¿™å°±æ˜¯â€œé¢å‘æ¥å£ç¼–ç¨‹â€

---

### 3ï¸âƒ£ ServiceImplï¼ˆçœŸæ­£å¹²æ´»çš„åœ°æ–¹ï¼‰

**èŒè´£**

* ä¸šåŠ¡é€»è¾‘
* å‚æ•°è®¡ç®—
* äº‹åŠ¡ã€ç¼“å­˜ã€æƒé™

```java

@Service
public class UserServiceImpl implements UserService {

    @Autowired
    private UserMapper userMapper;

    @Override
    public List<SysUser> getUserList(int pageNum, int pageSize, SysUser query) {
        int offset = (pageNum - 1) * pageSize;
        return userMapper.selectUserList(offset, pageSize, query);
    }
}
```

> ğŸ‘‰ **ä»¥ååŠ  @Transactional å°±åœ¨è¿™é‡Œ**

---

### 4ï¸âƒ£ Mapperï¼ˆSQL æ˜ å°„ï¼‰

**èŒè´£**

* Java å‚æ•° â†’ SQL
* SQL ç»“æœ â†’ Java å¯¹è±¡

```java
public interface UserMapper {

    List<SysUser> selectUserList(
            @Param("offset") int offset,
            @Param("pageSize") int pageSize,
            @Param("user") SysUser user
    );
}
```

```xml

<select id="selectUserList" resultType="com.quickmind.entity.SysUser">
    SELECT *
    FROM sys_user
    <where>
        <if test="user.userName != null and user.userName != ''">
            AND user_name LIKE CONCAT('%', #{user.userName}, '%')
        </if>
        <if test="user.status != null">
            AND status = #{user.status}
        </if>
    </where>
    LIMIT #{offset}, #{pageSize}
</select>
```

---

## ä¸‰ã€ä½ ç°åœ¨è¿™ä¸ªé˜¶æ®µçš„è®¤çŸ¥æ˜¯éå¸¸æ­£ç¡®çš„

ä½ ç°åœ¨çš„åšæ³•æ˜¯ï¼š

> âœ… **å…ˆæ‰‹å†™åˆ†é¡µ / æŸ¥è¯¢ / SQL**
> âŒ **æš‚æ—¶ä¸ä¾èµ– MyBatis-Plus**

è¿™æ˜¯**æœ€æ­£ç¡®çš„å­¦ä¹ è·¯å¾„**ï¼š

1. å…ˆæ‡‚ï¼š

    * offset æ€ä¹ˆç®—
    * å‚æ•°æ€ä¹ˆè¿› SQL
    * åˆ†å±‚ä¸ºä»€ä¹ˆå­˜åœ¨
2. å†ç”¨ï¼š

    * MP çš„ `Page<T>`
    * PageHelper

> å¦åˆ™å°±æ˜¯â€œä¼šç”¨ä½†ä¸æ‡‚â€

---

## å››ã€ä¸€å¥è¯æ€»ç»“ï¼ˆä½ å¯ä»¥ç›´æ¥è®°ï¼‰

> **Controller æ¥è¯·æ±‚
> Service å®šèƒ½åŠ›
> ServiceImpl å†™ä¸šåŠ¡
> Mapper å†™ SQL
> AjaxResult ç»Ÿä¸€è¿”å›**

